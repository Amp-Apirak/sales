# Repository Guidelines

## Project Structure & Module Organization
- `index.php`, `login.php`, `logout.php` — entry points.
- `config/` — database and env: `condb.php`, `env_loader.php`, `sales_db.sql`, `validation.php`.
- `include/` — shared UI/session parts: `Header.php`, `Footer.php`, `Navbar.php`, `Add_session.php`.
- `pages/` — feature modules (e.g., `account/`, `project/`, `customer/`, `setting/`). Create new features under an appropriate subfolder.
- `assets/` — CSS/JS/images; `AdminLTE/` — AdminLTE vendor UI.
- `uploads/` — user uploads (ensure writeable, not executable); `logs/` — app logs.
- `vendor/` — Composer deps (generated by `composer install`).

## Build, Test, and Development Commands
- Install deps: `composer install`
- Local run (built-in server): `php -S localhost:8000 -t .` then open `http://localhost:8000/sales/`
- XAMPP/Apache: place repo under `htdocs/sales`, copy `.env.example` to `.env`, import `config/sales_db.sql`.
- Clear vendor (if needed): remove `vendor/` then rerun `composer install`.

## Coding Style & Naming Conventions
- PHP: PSR-12 style, 4-space indent, UTF-8.
- Files: PHP pages lower_snake_case; classes PascalCase; functions camelCase.
- Security helpers: use `config/validation.php` (`sanitizeInput`, `escapeOutput`, `generateCSRFToken`, `validateCSRFToken`). Always use PDO prepared statements via `config/condb.php`.
- Paths: reference assets with `BASE_URL` from env.

## Testing Guidelines
- No formal test suite is included. Add focused tests where practical (e.g., pure helpers) with PHPUnit; place under `tests/` and wire via Composer script.
- Manual QA: verify role/permission behavior, CSRF on forms, upload validation, and SQL reads respect team/user scopes.

## Commit & Pull Request Guidelines
- Prefer Conventional Commits: `feat: add project export`, `fix(auth): rate-limit login`, `chore(ci): …`.
- Keep changes scoped; describe what/why; link issues.
- PRs must include: summary, screenshots for UI, steps to test, and notes on security/data migrations (e.g., schema updates in `config/sales_db.sql`).

## Security & Configuration Tips
- Copy `.env.example` to `.env` and set `DB_*`, `SECRET_KEY`, `ENCRYPTION_IV`, `JWT_SECRET`, `BASE_URL`. Never commit `.env`.
- Restrict `uploads/` (no script execution); rotate secrets; log only non-sensitive data to `logs/`.
- Always pass output through `escapeOutput()` and validate all inputs; maintain role checks in modules under `pages/` using session values.

